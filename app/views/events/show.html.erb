<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css2?family=Karla:wght@400;700&display=swap" rel="stylesheet">

<style>
  body {
    font-family: 'Karla', sans-serif;
    background-color: #E3E2DE;
  }
</style>

<div class="container mt-5">
  <div class="row">
    <div class="col-12 text-center">
      <h1 class="text-center" style="padding: 20px;"><b><%= @event.title.upcase %></b></h1>
        <div class="container" style="padding: 20px">
          <% if @event.user == current_user %>
            <%= link_to "Update Event", edit_event_path(@event), class: "btn btn-secondary" %>
          <% end %>
          <% if @event.user_id == current_user.id %>
            <%= link_to "Cancel Event", event_path(@event), data: { turbo_method: :delete, confirm: "Are you sure you want to cancel this event?" }, class: "btn btn-danger" %>
          <% end %>
        </div>
      <h5 class="text-center text-secondary card" style="padding: 20px">
        <strong>Sport:</strong> <%= @event.sport.name %><br>
        <hr>
        <strong>Description:</strong> <%= @event.description %><br>
        <hr>
        <strong>Level:</strong> <%= @event.level.name %><br>
        <hr>
        <strong>Location:</strong> <%= @event.location %><br>
        <hr>
        <strong>Date:</strong> <%= @event.date %><br>
        <hr>
        <strong>Time:</strong> <%= @event.time %>
      </h5>
    </div>
  </div>
</div>

 <div class="container mt-5 text-center">
    <div class="card" style="width: 20%; margin: auto">
        <h3 class="text-center text-primary" style="padding: 20px"><b>Participants</b></h3>
        <ul class="list-unstyled">
          <% @event.participating_users.each do |participating_user| %>
          <%= link_to user_path(participating_user.user_id) do %>
            <li class="text-center text-secondary"><%= participating_user.user.username %></li>
          <% end %>
          <% end %>
        </ul>
  </div>
</div>
<div class="row mt-5">
    <div class="col-12">
        <h3 class="text-center text-primary">Chat for <%= @event.title %></h3>
          <%= link_to 'Join the chat for ', chatroom_path(@chatroom) %><%= @event.title %>
    </div>
</div>
 <div class="row mt-5">
    <div class="col-12 text-center">
      <% if current_user %>
        <% if current_user.participating_users.find_by(event_id: @event.id) %>
          <%= link_to "Cancel Registration",
          participating_user_path(current_user.participating_users.find_by(event_id: @event.id)),
           data: { turbo_method: :delete, confirm: "Are you sure you want to cancel your registration?" },
          class: "btn btn-danger" %>
        <% else %>
          <%= simple_form_for [@event, @participating_user] do |form| %>
            <%= form.submit 'Sign up', class: "btn btn-primary" %>
          <% end %>
        <% end %>
      <% end %>

  </div>
 </div>
